"use strict";var F=Object.create;var v=Object.defineProperty;var g=Object.getOwnPropertyDescriptor;var I=Object.getOwnPropertyNames;var y=Object.getPrototypeOf,k=Object.prototype.hasOwnProperty;var x=(t,e)=>{for(var i in e)v(t,i,{get:e[i],enumerable:!0})},w=(t,e,i,s)=>{if(e&&typeof e=="object"||typeof e=="function")for(let n of I(e))!k.call(t,n)&&n!==i&&v(t,n,{get:()=>e[n],enumerable:!(s=g(e,n))||s.enumerable});return t};var m=(t,e,i)=>(i=t!=null?F(y(t)):{},w(e||!t||!t.__esModule?v(i,"default",{value:t,enumerable:!0}):i,t)),P=t=>w(v({},"__esModule",{value:!0}),t);var W={};x(W,{activate:()=>b,deactivate:()=>C});module.exports=P(W);var o=m(require("vscode")),h=m(require("path")),u=class{constructor(){this.setupFileWatcher()}dispose(){this._fileSystemWatcher!==void 0&&this._fileSystemWatcher.dispose()}async navigateToFile(e){let i=o.window.activeTextEditor;if(i===void 0){o.window.showInformationMessage("No active editor");return}if(i.document.uri.scheme!=="file"){o.window.showInformationMessage("Please navigate to a file first");return}if(o.workspace.getWorkspaceFolder(i.document.uri)===void 0){o.window.showInformationMessage("File is not in workspace");return}let n=await this.getFiles();if(n.length===0){o.window.showInformationMessage("No files found in workspace");return}let a=n.findIndex(f=>f.fsPath===i.document.uri.fsPath);if(a===-1){o.window.showInformationMessage("Current file not found in workspace");return}let d=e==="next"?this.findNextFile(n,a):this.findPreviousFile(n,a);await this.openFile(d)}async getFiles(){return this._cachedFiles??=await this.buildFileList(),this._cachedFiles}findNextFile(e,i){let s=i<e.length-1?i+1:0;return{file:e[s],wrapped:s===0}}findPreviousFile(e,i){let s=i>0?i-1:e.length-1;return{file:e[s],wrapped:s===e.length-1}}setupFileWatcher(){this._fileSystemWatcher=o.workspace.createFileSystemWatcher("**/*"),this._fileSystemWatcher!==void 0&&(this._fileSystemWatcher.onDidCreate(()=>this.invalidateCache()),this._fileSystemWatcher.onDidDelete(()=>this.invalidateCache()),this._fileSystemWatcher.onDidChange(()=>this.invalidateCache()))}invalidateCache(){this._cachedFiles=void 0}async buildFileList(){let e=o.workspace.workspaceFolders;if(e===void 0)return[];let i=[];for(let s of e)await this.processDirectory(s.uri.fsPath,0,i,s);return i}async processDirectory(e,i,s,n){try{let a=await o.workspace.fs.readDirectory(o.Uri.file(e)),d=[],f=[];for(let[c,l]of a){let p=h.join(e,c);l===o.FileType.File?d.push({workspacePath:h.relative(n.uri.fsPath,p),fsPath:p,level:i}):l===o.FileType.Directory&&f.push(p)}d.sort((c,l)=>c.workspacePath.localeCompare(l.workspacePath)),s.push(...d),f.sort((c,l)=>c.localeCompare(l));for(let c of f)await this.processDirectory(c,i+1,s,n)}catch(a){let d=a instanceof Error?a.message:String(a);throw o.window.showErrorMessage(`Error reading directory ${e}: ${d}`),a}}async openFile(e){if(e?.file===void 0){o.window.showInformationMessage("No files to navigate to");return}let i=await o.workspace.openTextDocument(e.file.fsPath);await o.window.showTextDocument(i),e.wrapped===!0&&await o.window.showInformationMessage("File navigation wrapped.",{modal:!1})}},r;function b(t){r=new u;let e=o.commands.registerCommand("edit-next-file.nextFile",()=>{r!==void 0&&r.navigateToFile("next")}),i=o.commands.registerCommand("edit-next-file.previousFile",()=>{r!==void 0&&r.navigateToFile("previous")});t.subscriptions.push(r,e,i)}function C(){r!==void 0&&r.dispose()}0&&(module.exports={activate,deactivate});
